const loginFeedback = document.querySelector(".button-feedback"), loginPopup = document.querySelector(".modal"), loginClose = loginPopup.querySelector(".modal-close"), loginForm = loginPopup.querySelector(".feedback-form"), loginLogin = loginPopup.querySelector(".login-user"), loginPassword = loginPopup.querySelector(".login-email-user"); let isStorageSupport = !0, storage = ""; try { storage = localStorage.getItem("login") } catch (o) { isStorageSupport = !1 } loginFeedback.addEventListener("click", function (o) { o.preventDefault(), loginPopup.classList.add("modal-show"), storage ? (loginLogin.value = storage, loginPassword.focus()) : loginLogin.focus() }), loginClose.addEventListener("click", function (o) { o.preventDefault(), loginPopup.classList.remove("modal-show"), loginPopup.classList.remove("modal-error") }), loginForm.addEventListener("submit", function (o) { loginLogin.value && loginPassword.value ? isStorageSupport && localStorage.setItem("login", loginLogin.value) : (o.preventDefault(), loginPopup.classList.remove("modal-error"), loginPopup.offsetWidth = loginPopup.offsetWidth, loginPopup.classList.add("modal-error")) }), window.addEventListener("keydown", function (o) { 27 === o.keyCode && loginPopup.classList.contains("modal-show") && (o.preventDefault(), loginPopup.classList.remove("modal-show"), loginPopup.classList.remove("modal-error")) });
